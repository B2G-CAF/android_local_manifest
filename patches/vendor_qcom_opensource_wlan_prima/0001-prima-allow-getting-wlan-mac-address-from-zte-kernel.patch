From 9e141b5e734d102f555c128aea46f8c19079b6b5 Mon Sep 17 00:00:00 2001
From: Konsta <konsta09@gmail.com>
Date: Thu, 23 Oct 2014 20:50:17 +0300
Subject: [PATCH] prima: allow getting wlan mac address from zte kernel driver

Change-Id: I19d4c92078fdb5ca4d4682e8c0d3b1348f0f3021
---
 CORE/HDD/src/wlan_hdd_main.c |    8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/CORE/HDD/src/wlan_hdd_main.c b/CORE/HDD/src/wlan_hdd_main.c
index b828b4a..2cb56ca 100644
--- a/CORE/HDD/src/wlan_hdd_main.c
+++ b/CORE/HDD/src/wlan_hdd_main.c
@@ -224,6 +224,9 @@ static void hdd_set_multicast_list(struct net_device *dev);
 #endif
 
 void hdd_wlan_initial_scan(hdd_adapter_t *pAdapter);
+#ifdef USE_ZTE_MAC_DRIVER
+extern int zte_wifi_get_mac_addr(unsigned char *addr);
+#endif
 
 #if  defined (WLAN_FEATURE_VOWIFI_11R) || defined (FEATURE_WLAN_ESE) || defined(FEATURE_WLAN_LFR)
 void hdd_getBand_helper(hdd_context_t *pHddCtx, int *pBand);
@@ -8331,8 +8334,13 @@ int hdd_wlan_startup(struct device *dev )
       goto err_wiphy_unregister;
    }
 
+#ifdef USE_ZTE_MAC_DRIVER
+   // Get mac addr from ZTE driver
+   ret = zte_wifi_get_mac_addr((unsigned char*)&mac_addr);
+#else
    // Get mac addr from platform driver
    ret = wcnss_get_wlan_mac_address((char*)&mac_addr.bytes);
+#endif
 
    if ((0 == ret) && (!vos_is_macaddr_zero(&mac_addr)))
    {
-- 
1.7.9.5

